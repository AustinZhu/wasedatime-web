import React from 'react';
import { connect } from 'react-redux';

import {
  fetchBldgClassrooms,
  fetchBldgOccupiedClassrooms
} from '../actions/index';
import ClassroomList from '../components/ClassroomList';
import PropTypes from 'prop-types';

class ClassroomListContainer extends React.Component {
  componentDidMount() {
    this.props.fetchBldgClassrooms();
    this.props.fetchBldgOccupiedClassrooms();
  }

  render() {
    return <div />;
  }
}

const getClassroomNames = (classroomIds, classroomsById) => {
  if (classroomIds.length !== 0) {
    var classroomNames = classroomIds.map(id => classroomsById[id]['name']);
    console.log(classroomNames);
    return classroomNames;
  }
  return [];
};

const mapStateToProps = (state, ownProps) => {
  console.log(state);
  return {
    classroomNames: getClassroomNames(
      state.bldgClassroomIds,
      state.bldgClassroomsById
    ),
    occupiedClassroomNames: getClassroomNames(
      state.bldgOccupiedClassroomIds,
      state.bldgOccupiedClassroomsById
    )
  };
};

//using shorthand syntax
const mapDispatchToProps = {
  fetchBldgClassrooms,
  fetchBldgOccupiedClassrooms
};

//export a container component generated by react-redux
export default connect(mapStateToProps, mapDispatchToProps)(
  ClassroomListContainer
);
